var JCaption=new Class({initialize:function(t){this.selector=t;var e=$$(t);e.each(function(t){this.createCaption(t)},this)},createCaption:function(t){var e=document.createTextNode(t.title),a=document.createElement("div"),i=document.createElement("p"),n=t.getAttribute("width"),l=t.getAttribute("align");n||(n=t.width),l||(l=t.getStyle("float")),l||(l=t.style.styleFloat),""==l&&(l="none"),i.appendChild(e),i.className=this.selector.replace(".","_"),t.parentNode.insertBefore(a,t),a.appendChild(t),""!=t.title&&a.appendChild(i),a.className=this.selector.replace(".","_"),a.className=a.className+" "+l,a.setAttribute("style","float:"+l),a.style.width=n+"px"}});document.caption=null,window.addEvent("load",function(){var t=new JCaption("img.caption");document.caption=t});